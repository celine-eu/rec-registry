@base <https://celine-eu.github.io/ontologies/celine/> .
@prefix celine: <https://celine-eu.github.io/ontologies/celine#> .
@prefix peco: <https://purl.org/peco/peco-core#> .
@prefix prov: <http://www.w3.org/ns/prov#> .
@prefix sosa: <http://www.w3.org/ns/sosa/> .
@prefix bigg4kpi: <http://bigg-project.eu/ontology/bigg4kpi#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .

#################################################################
# SHACL Shapes for CELINE profile (Lean)
#################################################################

celine:EnergyCommunityShape a sh:NodeShape ;
  sh:targetClass celine:EnergyCommunity ;
  sh:property [
    sh:path celine:hasMember ;
    sh:nodeKind sh:IRI ;
    sh:minCount 0 ;
  ] ;
  sh:property [
    sh:path celine:hasMembership ;
    sh:nodeKind sh:IRI ;
    sh:minCount 0 ;
  ] .

celine:ParticipantShape a sh:NodeShape ;
  sh:targetClass celine:Participant ;
  sh:property [
    sh:path celine:isMemberOf ;
    sh:nodeKind sh:IRI ;
    sh:minCount 0 ;
  ] ;
  sh:property [
    sh:path celine:ownsAsset ;
    sh:nodeKind sh:IRI ;
    sh:minCount 0 ;
  ] .

celine:MembershipShape a sh:NodeShape ;
  sh:targetClass celine:Membership ;
  sh:property [
    sh:path celine:membershipParticipant ;
    sh:nodeKind sh:IRI ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path celine:membershipCommunity ;
    sh:nodeKind sh:IRI ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path celine:membershipRole ;
    sh:datatype xsd:string ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path celine:votingWeight ;
    sh:datatype xsd:decimal ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path celine:validFrom ;
    sh:datatype xsd:dateTime ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path celine:validTo ;
    sh:datatype xsd:dateTime ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
  ] .

celine:AssetShape a sh:NodeShape ;
  sh:targetClass celine:Asset ;
  sh:property [
    sh:path celine:isOwnedBy ;
    sh:nodeKind sh:IRI ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path celine:locatedAt ;
    sh:nodeKind sh:IRI ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path celine:hasMeter ;
    sh:nodeKind sh:IRI ;
    sh:minCount 0 ;
  ] ;
  sh:property [
    sh:path celine:hasTimeSeries ;
    sh:nodeKind sh:IRI ;
    sh:minCount 0 ;
  ] ;
  sh:property [
    sh:path celine:hasTariff ;
    sh:nodeKind sh:IRI ;
    sh:minCount 0 ;
  ] .

celine:MeterShape a sh:NodeShape ;
  sh:targetClass celine:Meter ;
  sh:property [
    sh:path celine:locatedAt ;
    sh:nodeKind sh:IRI ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path celine:hasTimeSeries ;
    sh:nodeKind sh:IRI ;
    sh:minCount 0 ;
  ] ;
  sh:property [
    sh:path celine:hasTariff ;
    sh:nodeKind sh:IRI ;
    sh:minCount 0 ;
  ] .

celine:TimeSeriesShape a sh:NodeShape ;
  sh:targetClass celine:TimeSeries ;
  sh:property [
    sh:path celine:observedEntity ;
    sh:nodeKind sh:IRI ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path celine:metric ;
    sh:datatype xsd:string ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path celine:unit ;
    sh:datatype xsd:string ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path celine:hasDatapoint ;
    sh:nodeKind sh:IRI ;
    sh:minCount 0 ;
  ] .

celine:DatapointShape a sh:NodeShape ;
  sh:targetClass celine:Datapoint ;
  sh:property [
    sh:path celine:timestamp ;
    sh:datatype xsd:dateTime ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path celine:value ;
    sh:datatype xsd:decimal ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] .

celine:ForecastShape a sh:NodeShape ;
  sh:targetClass celine:Forecast ;
  sh:property [
    sh:path celine:producedBy ;
    sh:nodeKind sh:IRI ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
  ] .

celine:KPIAssessmentShape a sh:NodeShape ;
  sh:targetClass celine:KPIAssessment ;
  sh:property [
    sh:path celine:producedBy ;
    sh:nodeKind sh:IRI ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path celine:validFrom ;
    sh:datatype xsd:dateTime ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path celine:validTo ;
    sh:datatype xsd:dateTime ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
  ] .

celine:SnapshotShape a sh:NodeShape ;
  sh:targetClass celine:Snapshot ;
  sh:property [
    sh:path celine:validFrom ;
    sh:datatype xsd:dateTime ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path celine:validTo ;
    sh:datatype xsd:dateTime ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
  ] .

celine:ScenarioShape a sh:NodeShape ;
  sh:targetClass celine:Scenario .

celine:ModelRunShape a sh:NodeShape ;
  sh:targetClass celine:ModelRun ;
  sh:property [
    sh:path celine:usesSnapshot ;
    sh:nodeKind sh:IRI ;
    sh:minCount 1 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path celine:usesScenario ;
    sh:nodeKind sh:IRI ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
  ] .

celine:WeatherObservationShape a sh:NodeShape ;
  sh:targetClass celine:WeatherObservation ;
  sh:property [
    sh:path sosa:observedProperty ;
    sh:nodeKind sh:IRI ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
  ] ;
  sh:property [
    sh:path sosa:resultTime ;
    sh:datatype xsd:dateTime ;
    sh:minCount 0 ;
    sh:maxCount 1 ;
  ] .
